{% extends "::vueMere.html.twig" %}



{% block contenuCentral %}
<script src="../../vendor/tableExport/tableExport.js"></script>
<script src="../../vendor/tableExport/jquery.base64.js"></script>
<script src="../../vendor/tableExport/html2canvas.js"></script>
<script src="../../vendor/tableExport/jspdf/libs/sprintf.js"></script>
<script src="../../vendor/tableExport/jspdf/jspdf.js"></script>
<script src="../../vendor/tableExport/jspdf/libs/base64.js"></script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

{# Contient la liste des stages ... #}
<div style="margin-top:18px;"> <!-- pour descendre le contenu de x pixels -->

<div class="panel panel-default">
    <div class="panel-heading">
        <h3> Liste des Stages </h3> 
        <!-- bouton de filtrage qui affiche toutes les promotions existantes -->
        <div class="row">
            <div class="col-lg-3">
                <p>Promotions en cours : </p>
                <a type="button" class="btn btn-success btn-xs"  href="{{ path('btsappli_utilisateurs_ajoutPromo') }}"><span class="glyphicon glyphicon-plus" aria-hidden="true" ></span> Ajouter</a>
                <a type="button" class="btn btn-warning btn-xs"  href="{{ path('btsappli_utilisateurs_ajoutPromo') }}"><span class="glyphicon glyphicon-pencil" aria-hidden="true" ></span> Modifier</a>
            </div>
            <div class="col-lg-3 col-lg-offset-4">
                <div class="pull-right btn-group">
                    <button class="btn btn-primary btn-filter" style="width:140px">Recherche</button>
                </div>
            </div>
            <div class="col-lg-2 ">

                <div class="btn-group">
                    <button type="button" class="btn btn-primary dropdown-toggle dropdown" style="width:140px" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
                    Filtrer <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu pull-right" style="width:200px" >
                        <li><a href="{{ path('btsappli_utilisateurs_suiviStagesFiltrerPasStage') }}"> Pas de stage </a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ path('btsappli_utilisateurs_suiviStagesFiltrerConventionNonValidee') }}"> Convention non validée </a></li>
                        <li><a href="{{ path('btsappli_utilisateurs_suiviStagesFiltrerConventionValidee') }}"> Convention validée </a></li>
                        <li><a href="{{ path('btsappli_utilisateurs_suiviStagesFiltrerConventionSignee') }}"> Convention signée </a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ path('btsappli_utilisateurs_suiviStagesFiltrerPromo') }}"> Promotion 1ère année </a></li>
                        <li><a href="{{ path('btsappli_utilisateurs_suiviStagesFiltrerPromo') }}"> Promotion 2ième année </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- Création du tableau contenant la liste des stages -->
    <div class="table-responsive">
        <table id="customers" class="table table-striped table-hover">
            <thead>
           
                <!-- Création de la première ligne contenant le nom de chaque colonne principale -->
                <tr align="center">
                    <td class="warning"></td> 
                    <td class="warning">Etudiants</td> 
                    <td class="warning"></td>
                    <td class="warning"></td>
                    <td class="success"></td>
                    <td class="success"></td>
                    <td class="success"></td>
                    <td class="success">Entreprises</td>
                    <td class="success"></td>
                    <td class="success"></td>
                    <td class="success"></td>
                    <td class="success"></td>
                </tr>
                <!-- Création de la première ligne contenant le nom de chaque colonne secondaire -->
                <!--<tr class="info " align="center">
                        <td>Infos</td>
                        <td>Statut</td>
                        <td>Date début</td>
                        <td>Date fin</td>
                    
                        <td>Nom</td>
                        <td>Adresse</td>
                        <td>Code Postal</td>
                        <td>Ville</td>
                        <td>Pays</td>
                        <td>E-Mail</td>
                        <td>Téléphone</td>
                        
                        <td>Suppr. stage</td>
                </tr>-->
                
                <tr class="filters info" align="center">
                        <th><input type="text" class="form-control" placeholder="Infos" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Statut" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Date début" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Date fin" disabled></th>
                        
                        <th><input type="text" class="form-control" placeholder="Nom" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Adresse" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Code postal" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Ville" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Pays" disabled></th>
                        <th><input type="text" class="form-control" placeholder="E-Mail" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Téléphone" disabled></th>
                        
                        <td>Suppr. stage</td>
                </tr>
            </thead>
            <tbody>
            <!-- Affichage de tous les stages -->
            {% for userCourant in tabUsersEtStages %}  
                {% if userCourant.stage == null %}
                <tr align="center">
                {% else %}
                <tr align="center" onclick="document.location.href='{{ path('btsappli_utilisateurs_voirStageEtu', {'id':userCourant.id}) }}'" style="cursor:pointer">
                {% endif %}
                    <td>{{userCourant.nom}} {{userCourant.prenom}}</td>
                
                {% if userCourant.stage is not null %}
                {% if userCourant.stage.etatConvention == 1 %}
                    <td> Non Validée</td>
                {% endif %}
                {% if userCourant.stage.etatConvention == 2 %}
                    <td> Validée </td>
                {% endif %}
                {% if userCourant.stage.etatConvention == 3 %}
                    <td> Signée </td>
                {% endif %}
                {% if userCourant.stage.etatConvention == null %}
                    <td></td>
                {% endif %}
                    <td>{{userCourant.stage.dateDebut|date("m/d/Y")}}</td>
                    <td>{{userCourant.stage.dateFin|date("m/d/Y")}}</td>
                
                    
                    <td>{{userCourant.stage.entreprise.nom}}</td>
                    <td>{{userCourant.stage.entreprise.adresse}}</td>
                    <td>{{userCourant.stage.entreprise.codePostal}}</td>
                    <td>{{userCourant.stage.entreprise.ville}}</td>
                    <td>{{userCourant.stage.entreprise.pays}}</td>
                    <td>{{userCourant.stage.entreprise.adresseMail}}</td>
                    <td>{{userCourant.stage.entreprise.telephone}}</td> 
                    
                    <td>
                        <a type="button" class="btn btn-danger"  href="{{ path('btsappli_utilisateurs_supprimerStageValidation', {'id':userCourant.id}) }}"><span class="glyphicon glyphicon-remove" aria-hidden="true" ></span></a>
                    </td>
                    
                {% else %}
                    <td></td>
                    <td></td>
                    <td></td>
                    
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                 
                    <td></td>
                {% endif %}

                </tr>
           {% endfor %}
           </tbody>
        </table>
    </div>
</div>
</div>

<div class="row">
        <div class="col-lg-1 ">
            <a href="{{ path('btsappli_utilisateurs_accueilAdmin') }}" role="button" class="btn btn-primary" type="button" style="width:140px">Retour</a>
        </div>
    
        <!--<div class="col-lg-1  col-lg-offset-2">
            <a href="#" role="button" onclick="javascript:window.print()" class="btn btn-primary" type="button" style="width:140px">Imprimer</a>
        </div> -->
        
        <div class="col-lg-1  col-lg-offset-7">
            <a href="{{ path('btsappli_utilisateurs_ReinitStagesValidation') }}" role="button" class="btn btn-info" type="button" style="width:140px"><span class="glyphicon glyphicon-repeat" aria-hidden="true"></span>&nbsp;&nbsp;Réinitialiser</a>
        </div>
        
        <div class="col-lg-1 col-lg-offset-2">
            <a href="#" role="button" onClick ="$('#customers').tableExport({type:'pdf',escape:'false'});" class="btn btn-info pull-right" type="button" style="width:140px"><span class="glyphicon glyphicon-print" aria-hidden="true"></span>&nbsp;&nbsp;Imprimer</a>
        </div>
</div>




{% endblock %}





